<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VallaTrade Pro | Plataforma de Trading Institucional</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=JetBrains+Mono:wght@500;700&display=swap');
        
        :root {
            --iq-bg-main: #0b0e18;     /* Fundo Principal Escuro */
            --iq-bg-sec: #141824;      /* Fundo Secundário */
            --iq-green: #00ff88;       /* Cor de Alta/Call */
            --iq-red: #ff3366;         /* Cor de Baixa/Put */
            --iq-blue: #2e5bff;        /* Cor de Destaque */
            --glass-border: rgba(255, 255, 255, 0.08);
        }

        body { 
            font-family: 'Outfit', sans-serif; 
            background-color: var(--iq-bg-main);
            color: #e4e4e7;
            overflow: hidden;
        }

        .mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Efeito de Vidro (Glassmorphism) */
        .glass-panel {
            background: rgba(20, 24, 36, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
        }

        /* Efeitos Neon */
        .neon-green-text { color: var(--iq-green); text-shadow: 0 0 10px rgba(0, 255, 136, 0.3); }
        .neon-red-text { color: var(--iq-red); text-shadow: 0 0 10px rgba(255, 51, 102, 0.3); }

        /* Botões de Trading */
        .btn-call { background: linear-gradient(135deg, #00ff88 0%, #00b35f 100%); box-shadow: 0 4px 15px rgba(0, 255, 136, 0.2); }
        .btn-put { background: linear-gradient(135deg, #ff3366 0%, #cc2952 100%); box-shadow: 0 4px 15px rgba(255, 51, 102, 0.2); }
        
        /* Inputs Customizados */
        .trade-input { background: rgba(255,255,255,0.03); border: 1px solid var(--glass-border); transition: all 0.3s; }
        .trade-input:focus { border-color: var(--iq-blue); background: rgba(46, 91, 255, 0.05); outline: none; }

        /* Animação de Carregamento */
        .loader { border-top-color: var(--iq-blue); -webkit-animation: spinner 1.5s linear infinite; animation: spinner 1.5s linear infinite; }
        @-webkit-keyframes spinner { 0% { -webkit-transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); } }
        @keyframes spinner { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        #auth-overlay { transition: opacity 0.5s ease-in-out, visibility 0.5s; }
        #app-container { opacity: 0; transition: opacity 0.8s ease-in-out; }
    </style>
</head>
<body class="h-screen relative">

    <div id="auth-overlay" class="absolute inset-0 z-[100] flex items-center justify-center bg-[#0b0e18]">
        <div class="absolute inset-0 overflow-hidden">
             <div class="absolute -top-[30%] -left-[10%] w-[70%] h-[70%] rounded-full bg-blue-600/10 blur-[120px]"></div>
             <div class="absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] rounded-full bg-purple-600/10 blur-[120px]"></div>
        </div>

        <div class="glass-panel p-8 md:p-12 rounded-2xl w-full max-w-md relative z-10 mx-4">
            <div class="text-center mb-8">
                <div class="flex items-center justify-center gap-2 mb-4">
                    <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center rotate-12 shadow-lg shadow-blue-900/30">
                        <i data-lucide="trending-up" class="text-white w-6 h-6 -rotate-12"></i>
                    </div>
                    <span class="text-3xl font-extrabold tracking-tight text-white">VALLA<span class="text-blue-500">TRADE</span></span>
                </div>
                <h2 class="text-xl font-bold text-zinc-100">Crie sua conta de Trader</h2>
                <p class="text-sm text-zinc-400 mt-2">Acesse o mercado financeiro global em segundos.</p>
            </div>

            <form id="register-form" class="space-y-4">
                <div>
                    <label class="text-xs font-bold text-zinc-500 uppercase pl-1">E-mail</label>
                    <div class="relative mt-1">
                        <i data-lucide="mail" class="absolute left-3 top-3 w-5 h-5 text-zinc-600"></i>
                        <input type="email" placeholder="seu@email.com" class="w-full trade-input rounded-lg py-3 pl-10 pr-4 text-sm text-white" required>
                    </div>
                </div>
                <div>
                    <label class="text-xs font-bold text-zinc-500 uppercase pl-1">Senha</label>
                    <div class="relative mt-1">
                        <i data-lucide="lock" class="absolute left-3 top-3 w-5 h-5 text-zinc-600"></i>
                        <input type="password" placeholder="Mínimo 8 caracteres" class="w-full trade-input rounded-lg py-3 pl-10 pr-4 text-sm text-white" required>
                    </div>
                </div>
                 <div>
                    <label class="text-xs font-bold text-zinc-500 uppercase pl-1">Moeda da Conta</label>
                    <select class="w-full trade-input rounded-lg py-3 px-4 text-sm text-white mt-1 appearance-none bg-transparent">
                        <option value="BRL">BRL - Real Brasileiro (R$)</option>
                        <option value="USD">USD - Dólar Americano ($)</option>
                    </select>
                </div>

                <button type="submit" class="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-4 rounded-lg text-sm transition-all transform active:scale-95 shadow-lg shadow-blue-900/20 mt-6 flex items-center justify-center">
                    <span id="btn-text">COMEÇAR A OPERAR AGORA</span>
                    <div id="btn-loader" class="loader border-2 border-t-2 border-gray-200 h-5 w-5 rounded-full hidden"></div>
                </button>
            </form>
            <p class="text-xs text-center text-zinc-500 mt-6">Ao se cadastrar, você concorda com os Termos de Uso da VallaTrade.</p>
        </div>
    </div>


    <div id="app-container" class="h-full flex flex-col">
        
        <header class="h-16 glass-panel flex items-center justify-between px-6 z-50 relative">
            <div class="flex items-center gap-8">
                <div class="flex items-center gap-2">
                    <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center rotate-12">
                        <i data-lucide="zap" class="text-white w-5 h-5 -rotate-12"></i>
                    </div>
                    <span class="text-xl font-extrabold tracking-tight">VALLA<span class="text-blue-500">TRADE</span></span>
                </div>
                <div class="hidden md:flex items-center gap-2 overflow-x-auto">
                    <div class="flex items-center gap-2 bg-zinc-900/50 border border-blue-500/30 px-3 py-1.5 rounded-lg cursor-pointer transition hover:bg-zinc-800">
                        <img src="https://flagcdn.com/w20/eu.png" class="w-4 h-3 rounded-sm object-cover"><img src="https://flagcdn.com/w20/us.png" class="w-4 h-3 rounded-sm object-cover -ml-1">
                        <span class="text-sm font-bold">EUR/USD</span>
                        <span class="text-xs bg-green-500/20 text-green-400 px-1.5 rounded-md font-bold ml-1">87%</span>
                    </div>
                     <div class="flex items-center gap-2 bg-zinc-900/50 border border-zinc-800 px-3 py-1.5 rounded-lg cursor-pointer transition hover:bg-zinc-800 opacity-60 hover:opacity-100">
                        <i data-lucide="bitcoin" class="w-4 h-4 text-orange-500"></i>
                        <span class="text-sm font-bold">BTC/USD</span>
                        <span class="text-xs bg-green-500/20 text-green-400 px-1.5 rounded-md font-bold ml-1">82%</span>
                    </div>
                </div>
            </div>

            <div class="flex items-center gap-6">
                <div class="text-right hidden sm:block bg-zinc-900/50 px-4 py-1 rounded-lg border border-zinc-800/50 cursor-pointer hover:border-zinc-700 transition group">
                    <div class="text-[10px] text-zinc-500 font-bold uppercase tracking-wider group-hover:text-blue-400 transition">Conta de Treinamento <i data-lucide="chevron-down" class="w-3 h-3 inline ml-1"></i></div>
                    <div class="text-green-400 font-extrabold mono text-lg" id="user-balance">R$ 10.000,00</div>
                </div>
                <button class="bg-orange-500 hover:bg-orange-600 text-white px-5 py-2 rounded-lg font-bold text-xs transition uppercase shadow-lg shadow-orange-900/20 hidden md:block">
                    Depositar
                </button>
                <div class="w-9 h-9 rounded-full bg-gradient-to-tr from-blue-500 to-purple-600 border-2 border-zinc-800 cursor-pointer"></div>
            </div>
        </header>

        <div class="flex flex-1 overflow-hidden relative">
            
            <aside class="w-16 glass-panel flex flex-col items-center py-6 gap-8 z-20">
                <i data-lucide="line-chart" class="w-6 h-6 text-blue-500 cursor-pointer"></i>
                <div class="relative group cursor-pointer">
                    <i data-lucide="history" class="w-6 h-6 text-zinc-500 hover:text-white transition"></i>
                    <div class="absolute left-10 top-0 hidden group-hover:block w-48 glass-panel p-3 rounded-lg z-50 ml-2">
                        <h4 class="text-xs font-bold text-zinc-400 uppercase mb-2">Últimas Operações</h4>
                        <div class="space-y-2 text-xs" id="trades-history-tooltip">
                            <p class="text-zinc-600 italic">Nenhuma operação hoje.</p>
                        </div>
                    </div>
                </div>
                <i data-lucide="trophy" class="w-6 h-6 text-zinc-500 hover:text-white cursor-pointer transition"></i>
                <i data-lucide="settings" class="w-6 h-6 text-zinc-500 hover:text-white cursor-pointer transition mt-auto"></i>
            </aside>

            <main class="flex-1 relative flex flex-col bg-gradient-to-b from-[#0b0e18] to-[#141824]">
                <div id="floating-price-tag" class="absolute right-0 top-1/2 -translate-y-1/2 bg-blue-600 px-2 py-1 rounded-l-md font-bold mono text-xs shadow-xl z-30 flex items-center gap-2 transition-all duration-300">
                    <span id="live-price-value">1.08450</span>
                    <span class="relative flex h-2 w-2">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-2 w-2 bg-white"></span>
                    </span>
                </div>
                
                <div id="main-chart-container" class="flex-1 w-full h-full"></div>
            </main>

            <aside class="w-72 glass-panel p-5 flex flex-col gap-5 z-20 border-l border-white/5">
                
                <div class="space-y-1">
                    <label class="text-[10px] font-black text-zinc-500 uppercase tracking-widest pl-1">Tempo</label>
                    <div class="relative">
                        <select class="w-full trade-input rounded-lg p-3 text-sm font-bold text-center appearance-none cursor-pointer bg-transparent">
                            <option>00:01:00 (60s)</option>
                            <option>00:05:00 (5m)</option>
                            <option>00:15:00 (15m)</option>
                        </select>
                         <i data-lucide="chevron-down" class="absolute right-4 top-3.5 w-4 h-4 text-zinc-500 pointer-events-none"></i>
                    </div>
                </div>

                <div class="space-y-3">
                    <label class="text-[10px] font-black text-zinc-500 uppercase tracking-widest pl-1">Investimento (R$)</label>
                    <div class="relative group">
                        <input type="number" id="investment-amount" value="100" min="10" class="w-full trade-input rounded-lg p-4 text-xl font-black text-center mono text-white" oninput="calculateProfit()">
                        <span class="absolute left-4 top-5 text-zinc-500 font-bold text-sm">R$</span>
                    </div>
                    <div class="flex gap-2">
                         <button onclick="quickAdd(10)" class="flex-1 bg-zinc-800 hover:bg-zinc-700 py-1 rounded text-xs font-bold transition">+10</button>
                         <button onclick="quickAdd(50)" class="flex-1 bg-zinc-800 hover:bg-zinc-700 py-1 rounded text-xs font-bold transition">+50</button>
                         <button onclick="quickAdd(100)" class="flex-1 bg-zinc-800 hover:bg-zinc-700 py-1 rounded text-xs font-bold transition">+100</button>
                    </div>
                </div>

                <div class="mt-auto bg-zinc-900/50 p-4 rounded-xl border border-white/5">
                     <div class="flex justify-between text-xs font-bold px-1 mb-1">
                        <span class="text-zinc-500 uppercase">Payout (87%)</span>
                    </div>
                    <div class="flex justify-between items-end">
                         <span class="text-sm font-bold text-zinc-400">Lucro Potencial:</span>
                         <span class="text-green-400 font-extrabold mono text-xl" id="potential-profit">+R$ 87,00</span>
                    </div>
                </div>

                <div class="space-y-3">
                    <button id="btn-call" class="w-full py-5 btn-call text-white rounded-xl flex flex-col items-center justify-center gap-1 transition transform active:scale-95 relative overflow-hidden group">
                        <div class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
                        <i data-lucide="arrow-up-circle" class="w-8 h-8 relative z-10"></i>
                        <span class="font-black text-lg uppercase tracking-tighter relative z-10">ACIMA</span>
                        <span class="text-[10px] font-bold relative z-10 opacity-80">Preço vai subir</span>
                    </button>

                    <button id="btn-put" class="w-full py-5 btn-put text-white rounded-xl flex flex-col items-center justify-center gap-1 transition transform active:scale-95 relative overflow-hidden group">
                        <div class="absolute inset-0 bg-white/20 -translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
                        <span class="font-black text-lg uppercase tracking-tighter relative z-10">ABAIXO</span>
                        <span class="text-[10px] font-bold relative z-10 opacity-80">Preço vai cair</span>
                         <i data-lucide="arrow-down-circle" class="w-8 h-8 relative z-10"></i>
                    </button>
                </div>
            </aside>
        </div>
    </div>

    <script>
        // Inicializa os ícones Lucide
        lucide.createIcons();

        // --- LÓGICA DE AUTENTICAÇÃO ---
        const authOverlay = document.getElementById('auth-overlay');
        const appContainer = document.getElementById('app-container');
        const registerForm = document.getElementById('register-form');
        const btnText = document.getElementById('btn-text');
        const btnLoader = document.getElementById('btn-loader');

        registerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            // Simula processamento
            btnText.classList.add('hidden');
            btnLoader.classList.remove('hidden');
            
            setTimeout(() => {
                // Transição de tela
                authOverlay.style.opacity = '0';
                authOverlay.style.visibility = 'hidden';
                appContainer.style.opacity = '1';
                
                // Inicializa o gráfico apenas após o login para performance
                initChart(); 
            }, 1500);
        });


        // --- LÓGICA DO TERMINAL DE TRADING ---
        let currentPrice = 1.08450;
        let userBalance = 10000.00;
        const payoutRate = 0.87;
        let dataSeries = []; // Dados do gráfico
        let chart; // Referência ao gráfico Apex

        // Elementos da UI
        const balanceEl = document.getElementById('user-balance');
        const investmentInput = document.getElementById('investment-amount');
        const profitEl = document.getElementById('potential-profit');
        const priceTag = document.getElementById('floating-price-tag');
        const priceValue = document.getElementById('live-price-value');
        const tradesTooltip = document.getElementById('trades-history-tooltip');

        // Função para formatar moeda (BRL)
        const formatBRL = (value) => value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

        // Funções do Painel de Trading
        function calculateProfit() {
            const amount = parseFloat(investmentInput.value) || 0;
            const profit = amount * payoutRate;
            profitEl.innerText = `+${formatBRL(profit)}`;
        }
        function quickAdd(val) {
            investmentInput.value = (parseFloat(investmentInput.value) || 0) + val;
            calculateProfit();
        }

        // Função de Simulação de Ordem (Call/Put)
        function placeOrder(type) {
            const amount = parseFloat(investmentInput.value);
            if (amount > userBalance || amount <= 0) return alert("Saldo insuficiente ou valor inválido.");

            // 1. Deduz do saldo
            userBalance -= amount;
            balanceEl.innerText = formatBRL(userBalance);

            // Feedback visual no botão
            const btn = type === 'call' ? document.getElementById('btn-call') : document.getElementById('btn-put');
            const originalHtml = btn.innerHTML;
            btn.innerHTML = `<div class="loader h-6 w-6 border-2 border-white rounded-full"></div>`;
            btn.disabled = true;

            // 2. Simulação de Resultado (após 3 segundos)
            setTimeout(() => {
                btn.innerHTML = originalHtml;
                btn.disabled = false;

                // Simulação simples: 50% de chance de vitória
                const isWin = Math.random() > 0.5; 
                
                if (isWin) {
                    const profit = amount * (1 + payoutRate);
                    userBalance += profit;
                    balanceEl.innerText = formatBRL(userBalance);
                    // Adiciona ao histórico (Vitória)
                    addToHistory('EUR/USD', type, profit - amount, true);
                    showToast('Vitória!', `Lucro de ${formatBRL(profit - amount)}`, 'success');
                } else {
                     // Adiciona ao histórico (Derrota)
                    addToHistory('EUR/USD', type, amount, false);
                    showToast('Derrota', `Preço foi contra sua previsão.`, 'error');
                }
            }, 3000);
        }

        // Adiciona listeners aos botões
        document.getElementById('btn-call').addEventListener('click', () => placeOrder('call'));
        document.getElementById('btn-put').addEventListener('click', () => placeOrder('put'));


        // --- LÓGICA DO GRÁFICO EM TEMPO REAL (ApexCharts) ---
        function initChart() {
            // Gera dados iniciais
            const now = Date.now();
            for (let i = 0; i < 100; i++) {
                dataSeries.push({
                    x: now - (100 - i) * 1000,
                    y: currentPrice + (Math.random() - 0.5) * 0.0005
                });
            }

            const options = {
                series: [{ name: 'Preço', data: dataSeries }],
                chart: {
                    type: 'area',
                    height: '100%',
                    fontFamily: 'JetBrains Mono, sans-serif',
                    animations: { enabled: true, easing: 'linear', dynamicAnimation: { speed: 900 } },
                    toolbar: { show: false },
                    zoom: { enabled: false },
                    background: 'transparent'
                },
                // Estilo da Linha e Preenchimento (O "Glow" da IQ Option)
                stroke: { curve: 'smooth', width: 2, colors: ['#2e5bff'] },
                fill: {
                    type: 'gradient',
                    gradient: {
                        shadeIntensity: 1,
                        opacityFrom: 0.5, opacityTo: 0.0,
                        stops: [0, 100],
                        colorStops: [
                            { offset: 0, color: "#2e5bff", opacity: 0.5 },
                            { offset: 100, color: "#0b0e18", opacity: 0 }
                        ]
                    }
                },
                // Remove eixos e grids para visual limpo
                grid: { show: false },
                xaxis: { type: 'datetime', labels: { show: false }, axisBorder: { show: false }, axisTicks: { show: false }, range: 60000 /* 1 min visível */},
                yaxis: { show: false, opposite: true },
                tooltip: { enabled: false },
                dataLabels: { enabled: false }
            };

            chart = new ApexCharts(document.querySelector("#main-chart-container"), options);
            chart.render();

            // Loop de Simulação de Preço (a cada 1s)
            setInterval(() => {
                // Pequena variação aleatória no preço
                const change = (Math.random() - 0.5) * 0.0002;
                currentPrice += change;
                
                // Adiciona novo ponto e remove o antigo
                dataSeries.push({ x: Date.now(), y: currentPrice });
                dataSeries.shift();
                chart.updateSeries([{ data: dataSeries }]);

                // Atualiza o Marcador Flutuante
                priceValue.innerText = currentPrice.toFixed(5);
                
                // Muda a cor do marcador baseado na micro-tendência
                if(change >= 0) {
                     priceTag.classList.remove('bg-iq-red'); priceTag.classList.add('bg-blue-600');
                } else {
                     priceTag.classList.remove('bg-blue-600'); priceTag.classList.add('bg-iq-red');
                }
                
                // Move o marcador no eixo Y (simulação visual simples)
                // Em um app real, usaríamos a escala do gráfico.
                // Aqui, usamos uma porcentagem baseada em uma faixa de preço fictícia.
                const range = 0.003; // Faixa de movimento
                const base = 1.08300;
                const percentage = Math.max(5, Math.min(95, ((currentPrice - base) / range) * 100));
                priceTag.style.top = `${100 - percentage}%`;

            }, 1000);
        }

        // --- Helpers UI ---
        function addToHistory(asset, type, value, isWin) {
            if (tradesTooltip.contains(document.querySelector('.italic'))) tradesTooltip.innerHTML = '';
            
            const color = isWin ? 'text-green-400' : 'text-red-400';
            const icon = isWin ? 'trending-up' : 'trending-down';
            const sign = isWin ? '+' : '-';

            const html = `
                <div class="flex justify-between items-center mb-2 border-b border-white/5 pb-1">
                    <div class="flex items-center gap-2">
                        <i data-lucide="${icon}" class="w-4 h-4 ${color}"></i>
                        <div>
                            <div class="font-bold">${asset}</div>
                            <div class="text-[10px] text-zinc-500 uppercase">${type}</div>
                        </div>
                    </div>
                    <div class="font-bold mono ${color}">${sign}${formatBRL(value)}</div>
                </div>
            `;
            tradesTooltip.insertAdjacentHTML('afterbegin', html);
            lucide.createIcons(); // Re-renderiza ícones novos
        }

        // Simples sistema de Toast (Notificação)
        function showToast(title, message, type) {
            // (Para simplificar este arquivo único, usaremos alerts nativos. 
            // Em produção, usaríamos uma biblioteca de toast como Toastify-js)
            // console.log(`${title.toUpperCase()}: ${message}`);
        }

        // Inicialização
        calculateProfit(); // Calcula lucro inicial
    </script>
</body>
</html>
