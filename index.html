// Função para analisar a tendência dos últimos 10 segundos
function getTradingSignal() {
    if (dataPoints.length < 10) return "AGUARDANDO...";

    const lastPrices = dataPoints.slice(-10); // Pega os últimos 10 pontos
    const first = lastPrices[0].y;
    const last = lastPrices[lastPrices.length - 1].y;

    if (last > first) {
        return { action: "COMPRA", color: "text-emerald-400", icon: "trending-up" };
    } else if (last < first) {
        return { action: "VENDA", color: "text-rose-500", icon: "trending-down" };
    } else {
        return { action: "NEUTRO", color: "text-zinc-400", icon: "minus" };
    }
}

// Atualiza o painel de sinal a cada segundo
setInterval(() => {
    const signal = getTradingSignal();
    const signalDiv = document.getElementById('signal-display');
    if (signalDiv) {
        signalDiv.innerHTML = `
            <div class="flex items-center gap-2 ${signal.color} font-black animate-pulse">
                <i data-lucide="${signal.icon}" class="w-4 h-4"></i>
                <span>SUGESTÃO: ${signal.action}</span>
            </div>
        `;
        lucide.createIcons();
    }
}, 1000);
